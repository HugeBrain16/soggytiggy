<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>soggytiggy - Gallery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link href="/styles/pink.css" rel="stylesheet">
    <link href="/styles/gallery.css" rel="stylesheet">
    <link href="/styles/modal.css" rel="stylesheet">
    <script src="/assets/jquery.js"></script>
  </head>
  <body>
    <div id="soggy-header" class="content">
      <div class="content-header">
        <h1 id="brand"><i class="fa-solid fa-palette"></i> Gallery <i class="fa-solid fa-palette"></i></h1>
        <h2>My works!</h2>
      </div>
    </div>
    <div class="content">
      <div class="content-navbar">
        <p class="navbar-item"><a href="/index.html">Home</a></p>
        <p class="navbar-item"><a href="/comms.html">Commissions</a></p>
        <p class="navbar-item"><a href="#">Gallery</a></p>
      </div>
      <div class="content-main">
        <p>Sort by:
          <select id="gallery-sort">
            <option value="latest">Latest</option>
            <option value="oldest">Oldest</option>
          </select>
          <ul>
            <li><input type="checkbox" class="gallery-filter-toggle" filter="gore"> Show gore</li>
            <li><input type="checkbox" class="gallery-filter-toggle" filter="nsfw"> Show NSFW/Suggestive</li>
          </ul>
        </p>
        <div class="gallery-content" align="center">
        </div>
      </div>
    </div>
    <script src="/scripts/gallery.js"></script>
    <script>
      $(document).ready(function() {
        var SHOW_FILTERED_CONTENT = false;

        function clearFilters() {
          $(".gallery-filter-toggle").each(function() {
            this.checked = false;
          });
        }

        loadPost();
        clearFilters();

        $(".gallery-filter-toggle").on("change", function() {
          if (!SHOW_FILTERED_CONTENT)
            if (confirm("These images may contain sensitive themes, gore and nudity.\ndo you wish to proceed?"))
              SHOW_FILTERED_CONTENT = true;
            else
              return clearFilters();

          var filters = [];

          $(".gallery-filter-toggle").each(function() {
            const filter = $(this);

            if (filter.is(":checked"))
              filters.push(filter.attr("filter"));
          });

          $(".gallery").each(function() {
            const image = $(this);

            if (image.attr("tags") !== undefined) {
              if (image.attr("tags").split(",").some(filter => filters.includes(filter)))
                image.css("display", "inline-grid");
              else
                image.css("display", "none");
            }
          });
        });

        $("#gallery-sort").on("change", function() {
          if (this.value === "latest") {
            loadPost();
          } else if (this.value === "oldest") {
            loadPost(true);
          }
        });
      });
    </script>
  </body>
</html>
